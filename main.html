function placeWords() {
  for (const word of words) {
    let placed = false;
    for (let attempts = 0; attempts < 1000 && !placed; attempts++) {
      const directions = [
        { dx: 1, dy: 0 },   // →
        { dx: -1, dy: 0 },  // ←
        { dx: 0, dy: 1 },   // ↓
        { dx: 0, dy: -1 },  // ↑
        { dx: 1, dy: 1 },   // ↘
        { dx: -1, dy: -1 }, // ↖
        { dx: 1, dy: -1 },  // ↗
        { dx: -1, dy: 1 }   // ↙
      ];
      const dir = directions[Math.floor(Math.random() * directions.length)];
      const len = word.length;

      const startX = dir.dx === 1 ? Math.floor(Math.random() * (rows - len)) :
                     dir.dx === -1 ? Math.floor(Math.random() * (rows - len)) + len - 1 :
                     Math.floor(Math.random() * rows);

      const startY = dir.dy === 1 ? Math.floor(Math.random() * (cols - len)) :
                     dir.dy === -1 ? Math.floor(Math.random() * (cols - len)) + len - 1 :
                     Math.floor(Math.random() * cols);

      let fits = true;
      for (let i = 0; i < len; i++) {
        const nx = startX + dir.dx * i;
        const ny = startY + dir.dy * i;
        if (
          nx < 0 || ny < 0 || nx >= rows || ny >= cols ||
          (grid[nx][ny] && grid[nx][ny] !== word[i])
        ) {
          fits = false;
          break;
        }
      }

      if (fits) {
        for (let i = 0; i < len; i++) {
          const nx = startX + dir.dx * i;
          const ny = startY + dir.dy * i;
          grid[nx][ny] = word[i];
          placedWords.push({ x: nx, y: ny, word });
        }
        placed = true;
      }
    }
  }
}
